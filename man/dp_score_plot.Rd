% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/dp_score_plot.R
\name{dp_score_plot}
\alias{dp_score_plot}
\title{DP PCA Score Plot with 2D Histograms}
\usage{
dp_score_plot(
  X,
  center = TRUE,
  scale. = FALSE,
  dp_pca_flag = FALSE,
  cpp.option = TRUE,
  axes = c(1, 2),
  eps_total,
  delta_total,
  eps_ratio = NULL,
  delta_ratio = NULL,
  inflate = 0.2,
  q_frame = NULL,
  m_x = NULL,
  m_y = NULL,
  bin_method = c("J", "W", "none"),
  mechanism = c("all", "none", "add", "sparse"),
  sampling = FALSE,
  color = "#6A5ACD"
)
}
\arguments{
\item{X}{A numeric matrix or an object coercible to a matrix with
\eqn{n} rows (observations) and \eqn{p} columns (variables).
PCA is performed on \code{X}, and the first two PCs are used for plotting.}

\item{center}{Logical; should the variables be centered before PCA?
Passed to \code{scale()}.}

\item{scale.}{Logical; should the variables be scaled to unit variance?
Passed to \code{scale()}.}

\item{dp_pca_flag}{Logical; if \code{TRUE}, apply differentially private PCA
using \code{dp_pca()} with part of the total privacy budget
\code{eps_total}, \code{delta_total}. If \code{FALSE}, use non-DP PCA.}

\item{cpp.option}{Logical; if \code{TRUE}, allow C++ implementations inside
DP mechanisms (e.g., \code{mech_tau_sph()}) when available.}

\item{axes}{Integer vector indicating which principal components to return
(e.g., \code{c(1, 2)} for the first two PCs). The maximum index in
\code{axes} must not exceed the number of variables \code{p}.}

\item{eps_total}{Total privacy budget \eqn{\varepsilon_{\text{total}}} to be
split among DP-PCA (optional), DP frame (\code{dp_frame()}), and DP
histogram mechanisms (inside \code{dp_hist()}).}

\item{delta_total}{Total privacy parameter \eqn{\delta_{\text{total}}} to be
split among the same components.}

\item{eps_ratio}{Optional numeric vector specifying the relative allocation
of \code{eps_total}. If \code{dp_pca_flag = TRUE}, this must have length 3
and corresponds to \code{(PCA, q, hist)}. If \code{dp_pca_flag = FALSE},
this must have length 2 and corresponds to \code{(q, hist)}. The vector is
normalized to sum to 1. If \code{NULL}, equal weights are used.}

\item{delta_ratio}{Optional numeric vector specifying the relative allocation
of \code{delta_total}, with the same conventions as \code{eps_ratio}. The
vector is normalized to sum to 1. If \code{NULL}, equal weights are used.}

\item{inflate}{Non-negative numeric value controlling how much to enlarge the
DP frame relative to the DP min--max interval obtained from
\code{dp_frame()}. A value of \code{inflate = 0.20} enlarges the interval
by 20\\%.}

\item{q_frame}{Optional symmetric quantile level in \eqn{(0,1)} passed to
\code{dp_frame()} via \code{dp_hist()}. If \code{NULL}, extreme order
statistics \eqn{1/n} and \eqn{(n-1)/n} are used.}

\item{m_x}{Optional integer specifying the number of bins along the first PC
axis. If \code{NULL}, it is chosen via \code{number_bins()} inside
\code{dp_hist()}.}

\item{m_y}{Optional integer specifying the number of bins along the second PC
axis. If \code{NULL}, it is chosen via \code{number_bins()}.}

\item{bin_method}{Character string specifying the heuristic used by
\code{number_bins()} when \code{m_x} and/or \code{m_y} are not supplied.
One of \code{"J"} (Jing) or \code{"W"} (Wasserman).}

\item{mechanism}{Character string indicating which histogram mechanism(s) to
compute and display:
\itemize{
\item \code{"none"}: non-DP empirical histogram.
\item \code{"add"}: Gaussian additive-noise DP histogram.
\item \code{"sparse"}: sparse Laplace-thresholded DP histogram.
\item \code{"all"}: compute and, if possible, display all three versions.
}}

\item{sampling}{Logical; if \code{TRUE}, additionally generate and display
synthetic samples from each available histogram version using
\code{sample_from_hist()} with \code{k = n}.}

\item{color}{A character string specifying the base color used for points and
histogram tiles (default is a purple tone, \code{"#6A5ACD"}).}
}
\value{
A list equal to the output of \code{dp_hist()}, augmented with an additional
component \code{plot}, which is itself a list containing:
\itemize{
\item \code{all}: the full patchwork object combining all panels.
\item \code{org_scatter}: the original PCA scatter plot.
\item \code{org_hist}: the empirical histogram plot.
\item \code{org_sampling}: the empirical sampling plot (if available).
\item \code{add_hist}: the Gaussian-additive DP histogram plot (if any).
\item \code{add_sampling}: the Gaussian-additive sampling plot (if any).
\item \code{sparse_hist}: the sparse DP histogram plot (if any).
\item \code{sparse_sampling}: the sparse sampling plot (if any).
}
}
\description{
Creates a visualization that combines the original PCA score plot and
(optionally differentially private) 2D histograms based on the first two
principal components. Depending on the selected mechanism, the function
displays the empirical histogram, a Gaussian-additive DP histogram, and/or
a sparse Laplace-thresholded DP histogram, together with optional synthetic
samples drawn from each histogram.
}
\details{
This function is a visualization wrapper around \code{dp_hist()}. Internally,
it first calls \code{dp_hist()} to compute (DP) PCA scores, a differentially
private frame, and one or more histogram mechanisms on the 2D scores. It then
builds a panel of ggplot2 plots showing:
\itemize{
\item the original PCA scatter plot;
\item the empirical (non-DP) histogram on the 2D scores;
\item the Gaussian-additive DP histogram (if requested);
\item the sparse DP histogram (if requested);
\item optionally, synthetic samples drawn from each histogram version
(if \code{sampling = TRUE}).
}

Internally, helper functions such as \code{theme_dp_base_dp()},
\code{add_title_dp()}, \code{make_hist_plot_dp()}, and
\code{make_sample_plot_dp()} are used to construct a consistent visual layout
based on ggplot2 and patchwork.
}
\seealso{
\code{\link{dp_hist}},
\code{\link{dp_score_plot_group}},
\code{\link{dp_pca}},
\code{\link{dp_frame}},
\code{\link{number_bins}},
\code{\link{sample_from_hist}}
}
